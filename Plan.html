<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Japan Travel Guide - Plan</title>
    <link rel="stylesheet" href="./css/plan.css">
</head>

<body>
    <!-- Header -->
    <header class="top">
        <div class="top-nav">
            <div class="nav-inner">
                <h1 class="logo">Japan Travel Guide</h1>

                <nav>
                    <a href="JP-Travel.html">Home</a>
                    <a href="destination.html">Destinations</a>
                    <a href="Things to do.html">Things to do</a>
                    <a href="plan.html">Plan</a>
                </nav>

                <div class="search-wrap">
                    <button class="search-btn">
                        <span class="search-icon">
                            <svg width="20" height="28" viewBox="0 0 24 24">
                                <circle cx="11" cy="11" r="7" />
                                <line x1="16" y1="16" x2="22" y2="22" />
                            </svg>
                        </span>
                        <span class="search-text">Search</span>
                    </button>

                    <input type="text" class="search-input" placeholder="Search Japan..." />
                </div>

                <a href="sign-in.html" class="signin">Sign in</a>
            </div>
        </div>
        <div class="title-container">
            <div class="title-main">
                <div class="title-text">
                    G<span>o</span> traveling
                </div>
            </div>
        </div>
    </header>


    </header>

    <!-- Main Booking Widget -->
    <main class="plan-wrapper">
        <div class="booking-widget">
            <h2>Plan your <span>trip</span></h2>

            <!-- Tabs -->
            <div class="tabs">
                <button class="tab active" data-tab="stays">Stays</button>
                <button class="tab" data-tab="flights">Flights</button>
                <button class="tab" data-tab="activities">Activities</button>
                <button class="tab" data-tab="food">Food</button>
            </div>

            <!-- Booking Forms -->
            <div class="booking-form">

                <!-- Stays -->
                <div class="form-content" id="stays">
                    <div class="field">
                        <label>City</label>
                        <select id="bw-city">
                            <option>Tokyo</option>
                            <option>Kyoto</option>
                            <option>Nagoya</option>
                        </select>
                    </div>
                    <div class="field">
                        <label>Check-in</label>
                        <input type="date" id="bw-date">
                    </div>
                    <div class="field">
                        <label>Nights</label>
                        <select id="bw-nights">
                            <option>1 night</option>
                            <option>2 nights</option>
                            <option>3 nights</option>
                        </select>
                    </div>
                    <div class="field">
                        <label>People</label>
                        <select id="bw-people">
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                        </select>
                    </div>
                    <button class="search-btn" id="bw-search">Search Stays →</button>
                </div>

                <!-- Flights -->
                <div class="form-content" id="flights" style="display:none;">
                    <div class="field">
                        <label>From</label>
                        <input type="text" value="Taiwan (TPE)" disabled>
                    </div>

                    <div class="field">
                        <label>To</label>
                        <select id="flight-to">
                            <option value="tyoa">Tokyo</option>
                            <option value="ngoa">Nagoya</option>
                            <option value="kixa">Kyoto (Kansai)</option>
                        </select>
                    </div>

                    <div class="field">
                        <label>Departure</label>
                        <input type="date" id="flight-depart">
                    </div>

                    <div class="field">
                        <label>Return</label>
                        <input type="date" id="flight-return">
                    </div>
                    <div class="field">
                        <label>People</label>
                        <select id="flight-people">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                        </select>
                    </div>

                    <button class="search-btn" id="flight-search">Search Flights →</button>
                </div>



                <!-- Activities -->
                <div class="form-content" id="activities" style="display:none;">
                    <div class="field">
                        <label>City</label>
                        <select id="act-city">
                            <option>Tokyo</option>
                            <option>Kyoto</option>
                            <option>Nagoya</option>
                        </select>
                    </div>
                    <div class="field">
                        <label>Date</label>
                        <input type="date" id="act-date">
                    </div>
                    <div class="field">
                        <label>People</label>
                        <select id="act-people">
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                        </select>
                    </div>
                    <button class="search-btn" id="act-search">Search Activities →</button>
                </div>

                <!-- Food -->
                <div class="form-content" id="food" style="display:none;">
                    <div class="field">
                        <label>City</label>
                        <select id="food-city">
                            <option>Tokyo</option>
                            <option>Kyoto</option>
                            <option>Nagoya</option>
                        </select>
                    </div>
                    <div class="field">
                        <label>Date</label>
                        <input type="date" id="food-date">
                    </div>
                    <div class="field">
                        <label>People</label>
                        <select id="food-people">
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                        </select>
                    </div>
                    <button class="search-btn" id="food-search">Search Food →</button>
                </div>

            </div>
        </div>
    </main>

    <!-- JS -->
    <script>
        const topNav = document.querySelector('.top-nav');

        // 滾動變色
        window.addEventListener('scroll', () => {
            if (window.scrollY > 80) {
                topNav.classList.add('scrolled');
            } else {
                topNav.classList.remove('scrolled');
            }
        });

        const searchWrap = document.querySelector('.search-wrap');
        const searchBtn = document.querySelector('.search-btn');
        const searchInput = document.querySelector('.search-input');

        // 點擊搜尋按鈕，切換展開
        searchBtn.addEventListener('click', () => {
            searchWrap.classList.toggle('active');

            // 如果展開，focus 輸入框
            if (searchWrap.classList.contains('active')) {
                searchInput.focus();
            }
        });

        // 按下 Enter 可以提交搜尋（可選）
        searchInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                alert(`搜尋: ${searchInput.value}`);
                // 這裡可以改成真正搜尋功能
            }
        });
        document.addEventListener('click', (e) => {
            // 如果點擊不是 searchWrap 內部，收回
            if (!searchWrap.contains(e.target)) {
                searchWrap.classList.remove('active');
            }
        });


        // Tab 切換
        const tabs = document.querySelectorAll('.tab');
        const contents = document.querySelectorAll('.form-content');

        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                const target = tab.dataset.tab;
                contents.forEach(c => c.style.display = (c.id === target ? 'flex' : 'none'));
            });
        });

        // Booking.com 搜尋
        document.getElementById("bw-search").addEventListener("click", () => {
            const city = document.getElementById("bw-city").value;
            const checkin = document.getElementById("bw-date").value;
            const nights = parseInt(document.getElementById("bw-nights").value);
            if (!checkin) { alert("Please select a check-in date"); return; }

            const checkinDate = new Date(checkin);
            const checkoutDate = new Date(checkinDate);
            checkoutDate.setDate(checkoutDate.getDate() + nights);
            const checkout = checkoutDate.toISOString().split("T")[0];

            const url =
                `https://www.booking.com/searchresults.html?ss=${encodeURIComponent(city)}&checkin=${checkin}&checkout=${checkout}`;
            window.open(url, "_blank");
        });

        // Flights Skyscanner 搜尋
        document.getElementById("flight-search").addEventListener("click", () => {
            const from = "tpe"; // Taipei
            const to = document.getElementById("flight-to").value; // nrt / hnd / ngo / kix
            const depart = document.getElementById("flight-depart").value;
            const ret = document.getElementById("flight-return").value;
            const people = document.getElementById("flight-people").value;

            if (!depart) {
                alert("Please select departure date");
                return;
            }

            const departDate = depart.replace(/-/g, "");
            const returnDate = ret ? ret.replace(/-/g, "") : "";

            let url = `https://www.skyscanner.com/transport/flights/${from}/${to}/${departDate}/`;

            if (returnDate) {
                url += `${returnDate}/`;
            }

            url += `?adultsv2=${people}`;

            window.open(url, "_blank");



        });





        // Activities Klook
        document.getElementById("act-search").addEventListener("click", () => {
            const city = document.getElementById("act-city").value;
            const date = document.getElementById("act-date").value;
            if (!date) { alert("Please select a date"); return; }
            const url = `https://www.klook.com/en-US/search?query=${encodeURIComponent(city)}`;
            window.open(url, "_blank");
        });

        // Food 日本訂餐網站（以 tabelog 範例）
        document.getElementById("food-search").addEventListener("click", () => {
            const city = document.getElementById("food-city").value;
            const url = `https://tabelog.com/en/${city.toLowerCase()}/`;
            window.open(url, "_blank");
        });
    </script>
</body>

</html>